function displayLyrics(lyrics) {
  const lyricsContainer = document.querySelector('.lyrics-container');
  lyricsContainer.innerHTML = ''; // 기존 가사Clear
  currentLyrics = lyrics.map(line => {
    const lyricLine = document.createElement('div');
    lyricLine.className = 'lyrics-line';
    lyricLine.textContent = line.text;
    lyricLine.dataset.time = line.time;
    lyricLine.addEventListener('click', () => {
        audio.currentTime = parseFloat(lyricLine.dataset.time);
        updateLyrics();
    });
    lyricsContainer.appendChild(lyricLine);
    return lyricLine; // DOM 요소 반환
  });
}


function updateLyrics() {
    if (!currentLyrics.length) return;

    const currentTime = audio.currentTime;
    let nextLyricIndex = -1;

    for (let i = 0; i < currentLyrics.length; i++) {
        if (currentLyrics[i].time > currentTime) {
            nextLyricIndex = i;
            break;
        }
    }

    let currentLyricIndex = nextLyricIndex === -1 ? currentLyrics.length - 1 : nextLyricIndex - 1;


    if (highlightedLyric) {
        highlightedLyric.classList.remove('active');
    }

    if (currentLyricIndex >= 0) {
        highlightedLyric = currentLyrics[currentLyricIndex]; // DOM 요소 저장
        highlightedLyric.classList.add('active');
    }
}
