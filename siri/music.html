<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Siri Music - musicOS 1.0</title>
    <style>
        :root {
            --apple-black: #1D1D1F;
            --apple-gray: #86868B;
            --apple-red: #FF3B30;
            --section-spacing: 2rem;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell;
            background-color: var(--apple-black);
            color: white;
        }

        /* 음악 플레이어 스타일 */
        .music-player {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: linear-gradient(180deg, rgba(29,29,31,0.8) 0%, #1D1D1F 100%);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        /* 가사 표시 영역 */
        .lyrics-container {
            max-height: 60vh;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .lyric-line {
            padding: 0.8rem 1.5rem;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .lyric-line.active {
            opacity: 1;
            font-weight: 600;
        }

        /* 아티스트 그리드 레이아웃 */
        .artist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            padding: var(--section-spacing);
        }

        .artist-card {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 1;
            transition: transform 0.3s cubic-bezier(0.075, 0.82, 0.165, 1);
        }

        .artist-card:hover {
            transform: scale(1.03);
        }
    </style>
</head>
<body>
    <div class="status-bar">musicOS 1.0 <span class="time"></span></div>
    
    <main id="mainContent">
        <section class="featured-artists">
            <h2>인기 아티스트</h2>
            <div class="artist-grid">
                <!-- 동적으로 아티스트 카드 생성 -->
            </div>
        </section>
    </main>

    <div class="music-player" id="player">
        <audio id="audioElement" controls></audio>
        <div class="lyrics-container" id="lyricsBox"></div>
    </div>

<script>
const musicLibrary = {
    "NewJeans": {
        profileImage: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans.jpg",
        video: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans.mp4",
        albums: {
            "GetUp": {
                tracks: [
                    {
                        title: "ETA",
                        audio: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.mp3",
                        lyrics: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.srt"
                    }
                ]
            }
        }
    }
};

// 가사 파싱 및 동기화 시스템
async function loadLyrics(lyricsUrl) {
    const response = await fetch(lyricsUrl);
    const text = await response.text();
    return text.split('\n\n').map(entry => {
        const [time, ...lyrics] = entry.split('\n');
        const [start, end] = time.split(' --> ').map(t => {
            const [hms, ms] = t.split(',');
            const [h, m, s] = hms.split(':').map(Number);
            return h * 3600 + m * 60 + s + ms/1000;
        });
        return { start, end, text: lyrics.join(' ') };
    });
}

// 음원 메타데이터 처리
function handleAudioMetadata(audioElement) {
    audioElement.addEventListener('loadedmetadata', () => {
        document.getElementById('albumArt').src = URL.createObjectURL(audioElement.metadata.thumbnail);
    });
}

// PIP 플레이어 전환 로직
function togglePlayerSize() {
    const player = document.getElementById('player');
    player.classList.toggle('expanded');
}

// 초기화
document.addEventListener('DOMContentLoaded', () => {
    // 아티스트 그리드 생성 로직
    const grid = document.querySelector('.artist-grid');
    Object.entries(musicLibrary).forEach(([artist, data]) => {
        const card = document.createElement('div');
        card.className = 'artist-card';
        card.innerHTML = `
            <video muted loop poster="${data.profileImage}">
                <source src="${data.video}" type="video/mp4">
            </video>
            <h3>${artist}</h3>
        `;
        card.addEventListener('click', () => showArtistDetail(artist));
        grid.appendChild(card);
    });
});

// 실시간 시계 업데이트
function updateClock() {
    document.querySelector('.time').textContent = new Date().toLocaleTimeString('ko-KR');
}
setInterval(updateClock, 1000);
</script>
</body>
</html>
