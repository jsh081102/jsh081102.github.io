<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Web Music Player</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background-color: #000;
            color: #fff;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 250px;
            background-color: #1a1a1a;
            padding: 20px;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            position: relative;
        }

        .player-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #282828;
            padding: 20px;
            display: flex;
            align-items: center;
        }

        .album-art {
            width: 300px;
            height: 300px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .lyrics-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(20px);
            padding: 40px;
            overflow-y: auto;
        }

        .menu-item {
            padding: 10px;
            cursor: pointer;
            color: #b3b3b3;
        }

        .menu-item:hover {
            color: #fff;
        }

        #audio-player {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="menu-item">홈</div>
            <div class="menu-item">검색</div>
            <div class="menu-item">라이브러리</div>
            <!-- 음악 목록은 JavaScript로 동적 생성됨 -->
            <div id="playlist"></div>
        </div>

        <div class="main-content">
            <img id="current-album-art" class="album-art">
            <h2 id="current-song-title"></h2>
            <h3 id="current-artist"></h3>
            <button onclick="toggleLyrics()">가사 보기</button>
        </div>

        <div class="lyrics-container" id="lyrics-container">
            <div id="lyrics-content"></div>
        </div>

        <div class="player-container">
            <audio id="audio-player" controls></audio>
        </div>
    </div>

    <script>
        // 음악 라이브러리 데이터
        const musicLibrary = [
            {
                title: "ETA",
                artist: "NewJeans",
                audioUrl: "https://github.com/jsh081102/jsh081102.github.io/raw/refs/heads/main/misic/NewJeans2ndEP'GetUp'/ETA.m4a",
                lyricsUrl: "https://github.com/jsh081102/jsh081102.github.io/raw/refs/heads/main/misic/NewJeans2ndEP'GetUp'/ETA.srt"
            }
            // 여기에 더 많은 곡을 추가할 수 있습니다
        ];

        const audioPlayer = document.getElementById('audio-player');
        const playlist = document.getElementById('playlist');
        const lyricsContainer = document.getElementById('lyrics-container');

        // 플레이리스트 생성
        function createPlaylist() {
            musicLibrary.forEach((song, index) => {
                const songElement = document.createElement('div');
                songElement.className = 'menu-item';
                songElement.textContent = `${song.title} - ${song.artist}`;
                songElement.onclick = () => playSong(index);
                playlist.appendChild(songElement);
            });
        }

        // 노래 재생
        async function playSong(index) {
            const song = musicLibrary[index];
            audioPlayer.src = song.audioUrl;
            document.getElementById('current-song-title').textContent = song.title;
            document.getElementById('current-artist').textContent = song.artist;
            await loadAlbumArt(audioPlayer);
            audioPlayer.play();
        }

        // 앨범 아트 로드
        async function loadAlbumArt(audioElement) {
            // 메타데이터에서 앨범 아트 추출 로직
            // 실제 구현에서는 jsmediatags 같은 라이브러리 사용 필요
        }

        // 가사 토글
        function toggleLyrics() {
            if (lyricsContainer.style.display === 'none') {
                lyricsContainer.style.display = 'block';
                loadLyrics();
            } else {
                lyricsContainer.style.display = 'none';
            }
        }

        // 가사 로드
        async function loadLyrics() {
            const currentSong = musicLibrary[currentSongIndex];
            try {
                const response = await fetch(currentSong.lyricsUrl);
                const lyrics = await response.text();
                document.getElementById('lyrics-content').innerHTML = formatLyrics(lyrics);
            } catch (error) {
                console.error('가사를 불러오는데 실패했습니다:', error);
            }
        }

        // 초기화
        createPlaylist();
    </script>
</body>
</html>
