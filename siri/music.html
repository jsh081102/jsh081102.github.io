<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Siri Music - musicOS 1.0</title>
    <style>
        :root {
            --apple-primary: #f0f0f0;
            --player-height: 80px;
        }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell;
            background: var(--apple-primary);
        }

        /* Apple-style 그리드 레이아웃 */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 24px;
            padding: 20px;
        }

        /* 앨범 아트 카드 */
        .album-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 15px;
            backdrop-filter: blur(10px);
            transition: transform 0.3s;
            cursor: pointer;
        }

        /* 플레이어 스타일링 */
        #player {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: var(--player-height);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        /* 가사 표시 패널 */
        .lyrics-panel {
            position: fixed;
            bottom: var(--player-height);
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            max-height: 50vh;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 16px 16px 0 0;
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>musicOS 1.0</h1>
        <h2>Siri Music</h2>
    </header>

    <main class="music-grid" id="mainContent">
        <!-- 동적으로 아티스트 로드 -->
    </main>

    <div id="player">
        <img id="nowPlayingArt" src="" alt="Album Art" style="height: 60px; border-radius: 8px;">
        <div id="playerControls">
            <button id="playPause">▶</button>
            <input type="range" id="progress" value="0" style="width: 300px;">
            <span id="currentTime">0:00</span>
        </div>
    </div>

    <div class="lyrics-panel" id="lyricsContainer"></div>

<script>
const musicLibrary = {
    "NewJeans": {
        artistImage: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans.jpg",
        albums: {
            "NewJeans2ndEP'GetUp'": {
                cover: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/NewJeans2ndEP'GetUp'.jpg",
                tracks: [
                    {
                        title: "ETA",
                        url: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.mp3",
                        lyrics: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.srt"
                    }
                ]
            }
        }
    }
};

// 가사 파싱 및 동기화 시스템
async function loadLyrics(url) {
    const response = await fetch(url);
    const data = await response.text();
    return data.split('\n\n').map(entry => {
        const [time, ...text] = entry.split('\n');
        const [start, end] = time.split(' --> ').map(t => {
            const [hms, ms] = t.split(',');
            const [h, m, s] = hms.split(':').map(Number);
            return h * 3600 + m * 60 + s + parseFloat(`0.${ms}`);
        });
        return { start, end, text: text.join(' ') };
    });
}

// 음악 플레이어 로직
const audio = new Audio();
let currentLyrics = [];

audio.ontimeupdate = () => {
    const currentTime = audio.currentTime;
    const lyricLine = currentLyrics.find(l => currentTime >= l.start && currentTime < l.end);
    if(lyricLine) document.getElementById('lyricsContainer').innerText = lyricLine.text;
};
</script>
</body>
</html>
