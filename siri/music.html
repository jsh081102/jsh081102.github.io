<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Siri Music - musicOS 1.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: #f0f0f0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 20px 0;
        }

        .artist-section {
            margin: 20px 0;
            border-radius: 12px;
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .artist-video {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
        }

        .artist-info {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .artist-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
        }

        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .album-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
            cursor: pointer;
        }

        .album-card:hover {
            transform: scale(1.02);
        }

        .album-art {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
        }

        .mini-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            z-index: 1000;
        }

        .full-player {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 2000;
        }

        .lyrics-container {
            height: 300px;
            overflow-y: auto;
            text-align: center;
            margin: 20px 0;
        }

        .lyrics-line {
            padding: 5px 0;
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .lyrics-line.active {
            opacity: 1;
            font-size: 1.2em;
        }

        .controls {
            display: flex;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 24px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.2);
            position: relative;
            cursor: pointer;
        }

        .progress {
            height: 100%;
            background: white;
            width: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Siri Music</h1>
        </div>
        <div class="artist-section">
            <video class="artist-video" id="artist-video" src="http://www.applesodam.kro.kr/music/NewJeans/NewJeans.mp4"></video>
            <div class="artist-info">
                <img class="artist-image" src="http://www.applesodam.kro.kr/music/NewJeans/NewJeans.jpg" alt="NewJeans">
                <h2>NewJeans</h2>
            </div>
        </div>
        <div class="album-grid" id="album-grid">
            <!-- Albums will be dynamically added here -->
        </div>
    </div>

    <div class="mini-player" id="mini-player">
        <img src="" alt="Now Playing" id="mini-player-art" width="50" height="50">
        <div>
            <div id="mini-player-title"></div>
            <div id="mini-player-artist"></div>
        </div>
    </div>

    <div class="full-player" id="full-player">
        <img src="" alt="Now Playing" id="full-player-art" width="300" height="300">
        <h2 id="full-player-title"></h2>
        <p id="full-player-artist"></p>
        <div class="lyrics-container" id="lyrics-container"></div>
        <div class="controls">
            <button class="control-btn" id="prev-btn">⏮</button>
            <button class="control-btn" id="play-btn">⏵</button>
            <button class="control-btn" id="next-btn">⏭</button>
        </div>
        <div class="progress-bar" id="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
    </div>

    <audio id="audio-player"></audio>

    <script>
        const musicLibrary = {
            artists: [{
                name: 'NewJeans',
                albums: [{
                    name: "NewJeans2ndEP'GetUp'",
                    cover: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/NewJeans2ndEP'GetUp'.jpg",
                    songs: [{
                        title: 'ETA',
                        path: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.mp3",
                        lyrics: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.srt"
                    }]
                }]
            }]
        };

        let currentSong = null;
        let isPlaying = false;

        const audioPlayer = document.getElementById('audio-player');
        const miniPlayer = document.getElementById('mini-player');
        const fullPlayer = document.getElementById('full-player');
        const playBtn = document.getElementById('play-btn');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');

        function initializeMusicLibrary() {
            const albumGrid = document.getElementById('album-grid');
            musicLibrary.artists.forEach(artist => {
                artist.albums.forEach(album => {
                    const albumCard = document.createElement('div');
                    albumCard.className = 'album-card';
                    albumCard.innerHTML = `
                        <img src="${album.cover}" class="album-art" alt="${album.name}">
                        <div class="album-info">
                            <h3>${album.name}</h3>
                            <p>${artist.name}</p>
                        </div>
                    `;
                    albumCard.onclick = () => playAlbum(album);
                    albumGrid.appendChild(albumCard);
                });
            });
        }

        function playAlbum(album) {
            if (album.songs.length > 0) {
                playSong(album.songs[0]);
            }
        }

        function playSong(song) {
            currentSong = song;
            audioPlayer.src = song.path;
            audioPlayer.play();
            isPlaying = true;
            updatePlayerUI();
            loadLyrics(song.lyrics);
        }

        async function loadLyrics(lyricsPath) {
            try {
                const response = await fetch(lyricsPath);
                const text = await response.text();
                parseLyrics(text);
            } catch (error) {
                console.error('Failed to load lyrics:', error);
            }
        }

        function parseLyrics(srtContent) {
            // SRT parsing logic would go here
            // This is a simplified version
            const lyricsContainer = document.getElementById('lyrics-container');
            lyricsContainer.innerHTML = srtContent.split('\n')
                .filter(line => !line.match(/^\d+$/) && !line.match(/^\d{2}:\d{2}:\d{2}/))
                .map(line => `<div class="lyrics-line">${line}</div>`)
                .join('');
        }

        function updatePlayerUI() {
            // Update mini player
            document.getElementById('mini-player-art').src = currentSong.albumArt;
            document.getElementById('mini-player-title').textContent = currentSong.title;

            // Update full player
            document.getElementById('full-player-art').src = currentSong.albumArt;
            document.getElementById('full-player-title').textContent = currentSong.title;
            
            playBtn.textContent = isPlaying ? '⏸' : '⏵';
        }

        // Event Listeners
        miniPlayer.onclick = () => {
            fullPlayer.style.display = 'flex';
        };

        fullPlayer.onclick = (e) => {
            if (e.target === fullPlayer) {
                fullPlayer.style.display = 'none';
            }
        };

        playBtn.onclick = () => {
            if (isPlaying) {
                audioPlayer.pause();
            } else {
                audioPlayer.play();
            }
            isPlaying = !isPlaying;
            updatePlayerUI();
        };

        audioPlayer.ontimeupdate = () => {
            const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progress.style.width = `${percentage}%`;
            updateLyrics(audioPlayer.currentTime);
        };

        progressBar.onclick = (e) => {
            const rect = progressBar.getBoundingClientRect();
            const percentage = (e.clientX - rect.left) / rect.width;
            audioPlayer.currentTime = percentage * audioPlayer.duration;
        };

        // Initialize the music library when the page loads
        initializeMusicLibrary();
    </script>
</body>
</html>
