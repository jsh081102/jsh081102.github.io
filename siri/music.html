<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Siri Music</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
            Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f0f0f0;
        }
        header {
            background-color: #ffffff;
            padding: 20px;
            display: flex;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        header img {
            height: 40px;
            margin-right: 10px;
        }
        header h1 {
            font-size: 24px;
            margin: 0;
        }
        .main-content {
            padding: 20px;
        }
        .artist-section {
            margin-bottom: 40px;
        }
        .artist-banner {
            position: relative;
            height: 300px;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
        }
        .artist-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0));
            border-radius: 10px;
        }
        .artist-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #ffffff;
        }
        .artist-info h2 {
            margin: 0;
            font-size: 32px;
        }
        .play-button {
            background-color: #1db954;
            border: none;
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .play-button svg {
            margin-right: 5px;
        }
        .album-list {
            margin-top: 40px;
        }
        .album-list h3 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .album-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        .album-item img {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            margin-right: 20px;
        }
        .album-item h4 {
            margin: 0;
            font-size: 18px;
        }
        .song-list {
            margin-top: 20px;
        }
        .song-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            cursor: pointer;
        }
        .song-item h5 {
            margin: 0;
            font-size: 16px;
        }
        .player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #ffffff;
            box-shadow: 0 -1px 3px rgba(0,0,0,0.1);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        .player.collapsed {
            height: 60px;
        }
        .player.expanded {
            height: 100vh;
            flex-direction: column;
            justify-content: center;
        }
        .player img {
            width: 50px;
            height: 50px;
            border-radius: 4px;
            margin-right: 20px;
        }
        .player.collapsed img {
            display: block;
        }
        .player.expanded img {
            width: 300px;
            height: 300px;
            margin: 0;
        }
        .player-controls {
            flex: 1;
        }
        .player-controls h5 {
            margin: 0;
            font-size: 16px;
        }
        .lyrics {
            display: none;
            margin-top: 20px;
            text-align: center;
            font-size: 24px;
            line-height: 1.5;
        }
        .player.expanded .lyrics {
            display: block;
        }
        .progress-bar {
            width: 100%;
            height: 5px;
            background-color: #e0e0e0;
            margin-top: 10px;
            position: relative;
        }
        .progress {
            height: 100%;
            background-color: #1db954;
            width: 0;
        }
        .player-buttons {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .player-buttons button {
            background: none;
            border: none;
            font-size: 24px;
            margin-right: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<header>
    <img src="logo.png" alt="Siri Music Logo">
    <h1>Siri Music</h1>
</header>

<div class="main-content">
    <!-- Artist Sections -->
    <div class="artist-section" data-artist="NewJeans">
        <div class="artist-banner" style="background-image: url('http://www.applesodam.kro.kr/music/NewJeans/NewJeans.jpg');">
            <div class="artist-info">
                <h2>NewJeans</h2>
                <button class="play-button" onclick="playArtist('NewJeans')">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M5.5 3.5v9l6-4.5-6-4.5z"/>
                    </svg>
                    음악 재생
                </button>
            </div>
        </div>
        <!-- Albums -->
        <div class="album-list">
            <h3>앨범</h3>
            <div class="album-item" onclick="openAlbum('NewJeans', 'NewJeans2ndEP\'GetUp\'')">
                <img src="http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/NewJeans2ndEP'GetUp'.jpg" alt="Album Art">
                <h4>NewJeans 2nd EP 'Get Up'</h4>
            </div>
            <!-- 더 많은 앨범을 여기에 추가할 수 있습니다 -->
        </div>
    </div>
    <!-- 더 많은 아티스트 섹션을 여기에 추가할 수 있습니다 -->
</div>

<!-- Player -->
<div class="player collapsed" id="player">
    <img src="" alt="Album Art" id="player-album-art">
    <div class="player-controls" onclick="togglePlayer()">
        <h5 id="player-song-title"></h5>
        <div class="progress-bar" onclick="seek(event)">
            <div class="progress" id="progress"></div>
        </div>
    </div>
    <div class="player-buttons">
        <button onclick="prevSong()">⏮</button>
        <button onclick="togglePlay()">⏯</button>
        <button onclick="nextSong()">⏭</button>
    </div>
    <div class="lyrics" id="lyrics"></div>
</div>

<script>
// Global Variables
let currentTrack = null;
let audio = new Audio();
let isPlaying = false;
let isExpanded = false;
let lyricsData = [];
let lyricsIndex = 0;
let progressInterval;

// Sample Data (This would be fetched dynamically in a real application)
const artists = {
    "NewJeans": {
        name: "NewJeans",
        image: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans.jpg",
        video: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans.mp4",
        albums: {
            "NewJeans2ndEP'GetUp'": {
                name: "NewJeans 2nd EP 'Get Up'",
                image: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/NewJeans2ndEP'GetUp'.jpg",
                songs: {
                    "ETA": {
                        title: "ETA",
                        url: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.mp3",
                        lyrics: "http://www.applesodam.kro.kr/music/NewJeans/NewJeans2ndEP'GetUp'/ETA.srt"
                    },
                    // 더 많은 노래를 여기에 추가할 수 있습니다
                }
            },
            // 더 많은 앨범을 여기에 추가할 수 있습니다
        }
    },
    // 더 많은 아티스트를 여기에 추가할 수 있습니다
};

// Functions
function playArtist(artistName) {
    const artist = artists[artistName];
    const firstAlbumKey = Object.keys(artist.albums)[0];
    const firstAlbum = artist.albums[firstAlbumKey];
    const firstSongKey = Object.keys(firstAlbum.songs)[0];
    playSong(artistName, firstAlbumKey, firstSongKey);
}

function openAlbum(artistName, albumName) {
    const album = artists[artistName].albums[albumName];
    const mainContent = document.querySelector('.main-content');
    mainContent.innerHTML = `
        <h2>${album.name}</h2>
        <div class="song-list">
            ${Object.keys(album.songs).map(songKey => {
                const song = album.songs[songKey];
                return `
                    <div class="song-item" onclick="playSong('${artistName}', '${albumName}', '${songKey}')">
                        <h5>${song.title}</h5>
                    </div>
                `;
            }).join('')}
        </div>
    `;
}

function playSong(artistName, albumName, songKey) {
    const song = artists[artistName].albums[albumName].songs[songKey];
    currentTrack = {
        artistName,
        albumName,
        songKey,
        ...song
    };
    audio.src = song.url;
    document.getElementById('player-song-title').innerText = song.title;
    document.getElementById('player-album-art').src = artists[artistName].albums[albumName].image;
    loadLyrics(song.lyrics);
    togglePlay(true);
    showPlayer();
}

function togglePlay(forcePlay = false) {
    if (forcePlay || audio.paused) {
        audio.play();
        isPlaying = true;
    } else {
        audio.pause();
        isPlaying = false;
    }
}

function togglePlayer() {
    const player = document.getElementById('player');
    if (isExpanded) {
        player.classList.remove('expanded');
        player.classList.add('collapsed');
        isExpanded = false;
    } else {
        player.classList.remove('collapsed');
        player.classList.add('expanded');
        isExpanded = true;
    }
}

function showPlayer() {
    const player = document.getElementById('player');
    player.classList.remove('collapsed');
    player.classList.add('expanded');
    isExpanded = true;
}

function updateProgress() {
    const progress = document.getElementById('progress');
    const percentage = (audio.currentTime / audio.duration) * 100;
    progress.style.width = percentage + '%';
    updateLyrics();
}

function seek(event) {
    const progressBar = document.querySelector('.progress-bar');
    const rect = progressBar.getBoundingClientRect();
    const percent = (event.clientX - rect.left) / rect.width;
    audio.currentTime = percent * audio.duration;
}

function loadLyrics(url) {
    fetch(url)
        .then(response => response.text())
        .then(text => {
            lyricsData = parseSRT(text);
            lyricsIndex = 0;
        });
}

function updateLyrics() {
    const currentTime = audio.currentTime;
    if (lyricsIndex < lyricsData.length - 1 && currentTime >= lyricsData[lyricsIndex + 1].startTime) {
        lyricsIndex++;
    }
    const lyric = lyricsData[lyricsIndex] ? lyricsData[lyricsIndex].text : '';
    document.getElementById('lyrics').innerText = lyric;
}

function parseSRT(data) {
    const lines = data.split('\n');
    const entries = [];
    let i = 0;
    while (i < lines.length) {
        if (!lines[i].trim()) {
            i++;
            continue;
        }
        // Skip index line
        i++;
        // Timecode line
        const timecode = lines[i];
        const times = timecode.split(' --> ');
        const startTime = parseTime(times[0]);
        const endTime = parseTime(times[1]);
        i++;
        // Text lines
        let text = '';
        while (i < lines.length && lines[i].trim()) {
            text += lines[i] + '\n';
            i++;
        }
        entries.push({ startTime, endTime, text: text.trim() });
    }
    return entries;
}

function parseTime(timeString) {
    const parts = timeString.split(':');
    const secondsParts = parts[2].split(',');
    const hours = parseInt(parts[0]) * 3600;
    const minutes = parseInt(parts[1]) * 60;
    const seconds = parseInt(secondsParts[0]);
    const milliseconds = parseInt(secondsParts[1]) / 1000;
    return hours + minutes + seconds + milliseconds;
}

audio.addEventListener('timeupdate', updateProgress);
audio.addEventListener('ended', () => {
    isPlaying = false;
});

function prevSong() {
    // Implement previous song logic
}

function nextSong() {
    // Implement next song logic
}

// Initialize
</script>

</body>
</html>
